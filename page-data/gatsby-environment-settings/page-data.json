{"componentChunkName":"component---src-templates-blog-post-js","path":"/gatsby-environment-settings/","result":{"data":{"site":{"siteMetadata":{"title":"NARAZUKE","author":[{"name":"nozzle","summary":"who lives in gummaken.","social":{"github":"nozzlex3"}},{"name":"konnyaku","summary":"who is known as Siege Sukosuko Samurai.","social":{"github":"wabetarou"}}]}},"markdownRemark":{"id":"006a63f6-2c35-54f2-83ee-35eb140c9e73","excerpt":"Windows 編 nvm-win 導入 node がもう入ってるという人は読み飛ばしていい。 まず、nvm をインストールする。\nnode のバージョンを複数管理できて便利。 nvm-windows にアクセスして、をダウンロードする。\n2021/01/3…","html":"<h1>Windows 編</h1>\n<h2>nvm-win 導入</h2>\n<p>node がもう入ってるという人は読み飛ばしていい。<br>\nまず、nvm をインストールする。\nnode のバージョンを複数管理できて便利。<br>\n<a href=\"https://github.com/coreybutler/nvm-windows/releases\">nvm-windows</a> にアクセスして、<code class=\"language-text\">nvm-setup.zip</code>をダウンロードする。\n2021/01/31 時点での最新版は<code class=\"language-text\">1.1.7</code></p>\n<p><code class=\"language-text\">nvm-setup.exe</code>を起動して、ウィザードに従う。\n抱き合わせの怪しいソフトは無いので安心。</p>\n<p>Finished が出たらコマンドプロンプトか Powershell を開く。<br>\n<code class=\"language-text\">nvm version</code>と入力して自分がインストールした nvm のバージョンが出たら成功。</p>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\"><span class=\"token function\">PS</span> C:¥Users¥hoge> nvm version           <span class=\"token comment\"># nvmのバージョン表示</span>\n1<span class=\"token punctuation\">.</span>1<span class=\"token punctuation\">.</span>7</code></pre></div>\n<h2>node をインストール</h2>\n<p><code class=\"language-text\">nvm list available</code>でインストールできる node を吟味しよう。<br>\n最新版だと gatsby が対応していない可能性もあるので、LTS にあるバージョンが盤石に思える。<br>\n選んだら、<code class=\"language-text\">nvm install x.y.z</code>でインストールする。<br>\n自分の環境では v14.5.0 をインストールした。</p>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\"><span class=\"token function\">PS</span> C:¥Users¥hoge> nvm list available    <span class=\"token comment\"># インストール可能なnodeのversion表示</span>\n<span class=\"token function\">PS</span> C:¥Users¥hoge> nvm install x<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">.</span>z     <span class=\"token comment\"># バージョンx.y.zをインストールする</span></code></pre></div>\n<p>終わったら<code class=\"language-text\">nvm use x.y.x</code>でバージョンを選択する。\n<code class=\"language-text\">node --version</code>で`x.y.z と表示されたら成功。</p>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\"><span class=\"token function\">PS</span> C:¥Users¥hoge> nvm use x<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">.</span>z         <span class=\"token comment\"># nodeのバージョン選択</span>\n<span class=\"token function\">PS</span> C:¥Users¥hoge> node <span class=\"token operator\">--</span>version        <span class=\"token comment\"># nodeのバージョンを表示</span>\nx<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">.</span>z</code></pre></div>\n<p>参考: <a href=\"https://laboradian.com/how-to-use-nvm/\">Node.js のバージョン管理ツール nvm の使い方</a></p>\n<h2>gatsby をインストール</h2>\n<h3>npm を用いたインストール</h3>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\"><span class=\"token function\">PS</span> C:¥Users¥hoge> npm install <span class=\"token operator\">-</span>g gatsby<span class=\"token operator\">-</span><span class=\"token function\">cli</span>     <span class=\"token comment\"># gatsbyをインストール</span>\n<span class=\"token function\">PS</span> C:¥Users¥hoge> npm install <span class=\"token operator\">-</span>g yarn     <span class=\"token comment\"># gatsbyをインストール</span></code></pre></div>\n<p>ちょっとここから、本筋とは無関係な npm に関する全般的な備忘録が続く。</p>\n<h3>npm とは？</h3>\n<p>ここらへんは自分も曖昧なので詳しい人の解説を見よう。</p>\n<blockquote>\n<p>Node.js のパッケージを管理するための CLI であり、パッケージを作成したり、NPM 上のパッケージをローカルにインストールしたり、自分のパッケージを NPM に公開したりと、Node.js の開発に欠かせないツールである。Node.js をインストールすると自動的に npm もインストールされる。</p>\n</blockquote>\n<p>引用元: <a href=\"https://qiita.com/righteous/items/e5448cb2e7e11ab7d477\">【初心者向け】NPM と package.json を概念的に理解する</a></p>\n<p><code class=\"language-text\">pip</code>が<a href=\"https://pypi.org\">pypi.org</a>で管理されてるのと同様に、<code class=\"language-text\">npm</code>は<a href=\"https://www.npmjs.com\">NPM</a>で管理されてると考えて良い。</p>\n<h3>npm のインストール先</h3>\n<h4>グローバルインストール</h4>\n<p><code class=\"language-text\">npm</code>のインストール時、<code class=\"language-text\">-g</code>オプションを付けるとグローバルインストールとなり、どのディレクトリからも使用可能なコマンドとなる。<br>\nグローバルインストールの場合、モジュールは<code class=\"language-text\">npm</code>と同じ階層のディレクトリにインストールされる。<br>\n<code class=\"language-text\">nvm-windows</code>で<code class=\"language-text\">node</code>を導入した方は、<code class=\"language-text\">C:\\Users\\[username]\\AppData\\Roaming\\nvm\\v14.5.0\\node_modules</code>を参照すれば、<code class=\"language-text\">gatsby-cli</code>ディレクトリが確認できるはず。</p>\n<h4>ローカルインストール</h4>\n<p><code class=\"language-text\">-g</code>を<strong>付けない</strong>と、カレントディレクトリの<code class=\"language-text\">node_modules</code>にインストールされる。</p>\n<h2>gatsby 構築環境を作る</h2>\n<p>サイトのフォルダを置く場所まで移動しよう。</p>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\"><span class=\"token function\">PS</span> C:¥Users¥hoge> gatsby new <span class=\"token namespace\">[username]</span><span class=\"token punctuation\">.</span>github<span class=\"token punctuation\">.</span>io https:<span class=\"token operator\">/</span><span class=\"token operator\">/</span>github<span class=\"token punctuation\">.</span>com<span class=\"token operator\">/</span>gatsbyjs<span class=\"token operator\">/</span>gatsby<span class=\"token operator\">-</span>starter<span class=\"token operator\">-</span>blog       <span class=\"token comment\"># gatsby謹製スターターキットをローカル環境に作る</span></code></pre></div>\n<p>[username]を自分の github のアカウント名にしておくと、Github Pages で連携できる。</p>\n<p>gatsby-starter-blog 以外にも素敵なスターターがたくさんある。</p>\n<p>なお、git が Windows に入ってない場合、このコマンドに失敗する。\n入れよう。<br>\n<a href=\"https://qiita.com/kamishi/items/5a3eed06c122f28fe2ea\">自宅 PC に Git for Windows をインストールする手順</a> という qiita の記事が分かりやすかった。</p>\n<h2>gatsby をローカル環境で動かす</h2>\n<p><code class=\"language-text\">gatsby develop</code>でサーバを起動</p>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\"><span class=\"token function\">PS</span> C:¥Users¥hoge> gatsby develop       <span class=\"token comment\"># ローカルのサーバ起動</span></code></pre></div>\n<p>ブラウザで<code class=\"language-text\">https://localhost:8000</code>にアクセスすると、スターターブログが公開されているはず。ひとまずおめでとう！\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; overflow: visible\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ead913cb60bf5bf2adba997935ad9f70/6e9ba/blog_01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 120.25316455696202%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAA7DAAAOwwHHb6hkAAACv0lEQVQ4y51VyU7jQBDlE/kGDiCQOCIkIk5c+AJ+ASFxHc1pOM0MEhoQMIRkyOJ4d7zvWRz7TVcTW8FhIJOSXqq70i7X0q+8ASYvLy+QZRmapnG0222YponpdIqnpyc0m02EYcht3W4Xvu/DdV16FEVRcJSyQT9nZ2doNBo4ODjg2NnZwfb2Ns7Pz3F6eord3V3s7+/j+PgYh4eH2Nvbw8XFBXeQ5/myw6urK1xeXqLVavFoKZJer8ejzbIMSZLAtm2kaYrJZMKjI3sZ4aJwh42jI2xtbeHk5ASbm5vV2z+TMt3FtDfqb6AaUYTrCPniEepCB4YkwGGplOmpigxD1+DYFjzHhu+5cJl22d51HX7GITgOdF3nz1Upf/v6BbfXP3jNqIZ/Ol00NRcPso17xcWj6qFl+GjpPu5kF0GcYjwaIWE1HTEdxzGvbeWwmCPPC+QFAcjmmObL+DDleg1rR2rrV9SbsdQUKZxC8Kd4tkboOCO0rBTeKHu3kx/hNWW2aOsefrNa/VICdNwxHoYprDRbr8v0o8kiDEWCa+oIHAu+ZcA0dAyHQ95BgmEYXFPjSFuWxW0EOldedN4UgxkkWcFAFJmWIUoyJEni/BaZTVVVvqd1aVcUpfqfeL5iU9ZM+XGY4EaNWe0S3OkJrpUIajh5w9V/NWHRWdVlxbQhGjbMIEY8yRGOZ+y+FUuH60KTZnHaVNQTBwP0e10M+j20npvoMrYIQp9PHJqN/X6fM4j2BNqTvWxSFEVvHcbM4HsePM5XB0EQ8CFKNq7nA5V4SyjXZWeXUh7NCqSMZyxTtn7Lj1VHWBUhcfdWj/FdinCjJfgpR6yOs5VZUq/x68Vmo0oa9OGzsVTy9r3Dqwh3GIYRq5/PdV4sd/d/nM4dhpxKNDRNRiXBjiAEk3e/ap86LO8TfTKpazOGcTZjyNdy+BcufCnUvIlJpwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"blog\"\n        title=\"blog\"\n        src=\"/static/ead913cb60bf5bf2adba997935ad9f70/f058b/blog_01.png\"\n        srcset=\"/static/ead913cb60bf5bf2adba997935ad9f70/c26ae/blog_01.png 158w,\n/static/ead913cb60bf5bf2adba997935ad9f70/6bdcf/blog_01.png 315w,\n/static/ead913cb60bf5bf2adba997935ad9f70/f058b/blog_01.png 630w,\n/static/ead913cb60bf5bf2adba997935ad9f70/6e9ba/blog_01.png 731w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>Github Pages を使って公開する</h2>\n<p><code class=\"language-text\">gh-pages</code>を導入して Deploy する</p>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\"><span class=\"token function\">PS</span> C:¥Users¥hoge> yarn add <span class=\"token operator\">--</span>dev gh<span class=\"token operator\">-</span>pages   <span class=\"token comment\"># package.jsonのdevDependenciesにgh-pagesをインストール</span>\n<span class=\"token function\">PS</span> C:¥Users¥hoge> yarn run deploy           <span class=\"token comment\"># gh-pagesを使って[username].github.ioにdeploy</span></code></pre></div>\n<p>すると、Windows なら Github のアカウント認証のポップアップが出てくる。\nメールアドレスとパスワード、もしくはアクセストークンで認証する。</p>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\nPublished\nDone in xx<span class=\"token punctuation\">.</span>xxs<span class=\"token punctuation\">.</span></code></pre></div>\n<p>と表示されたら完了。</p>\n<p>[username].github.io にアクセスすると deploy したサイトが公開されている。\nおめでとう！</p>\n<h2>トラブルシュート: ERROR #11321 PLUGIN</h2>\n<h3>問題</h3>\n<p><code class=\"language-text\">yarn run deploy</code>する時に、エラーが吐かれることがある。</p>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\"><span class=\"token string\">\"gatsby-plugin-manifest\"</span> threw an error <span class=\"token keyword\">while</span> running the onPostBootstrap lifecycle:</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; overflow: visible\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7b63ae617fc03403f8c08481c97a65b6/31aff/error_01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 108.86075949367088%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACdklEQVQ4y5VVwXKbMBDNj7ROMZKQBLIwYGyTzLSZpK2bTDq99tiZnpL/v27fLsExjknSw/PuCHh6z7tanf3yNf3xHf32a+q8p+gNuVyTn0ARMsoLIzlH5xVp84lMlgjOqmZB7WZJdVsi1lTVQT6KpadFZDjJy2UusaoXtKyKp7WCQrBjwgILZZnvSXhX61JK0xmlakZKn4/Aa8frTMSkjDPvtSwMD5dQstk22KQAOT973n0KI4U5CFkRL2ZOUVx4UVvCVhHM6OVTBC8ImcxaEMKGjbDe5OT9R7HMigcrhzhFuicM+NNtyCkLETEiBoFDngO+YCyAING6bJKsL0qmqDYZVQKD3FCD3GdQLS/N37Q8IryKJT02X+ihu6aHyxv621zR48WOtlCd6BkZk/yf5cwlVK+hcq0p1ooMCpPliiwaljuAG9cdFO5NhZmdo1ED1U0kBzJWlL2zRU4SWihctQpI0X9WTkKzinJieDPpAoDz19rlQGEChRrHSCHycQpyzHqrsO5OW56yLwq3nab1RlG7tlAXECtpbibpSXuF77EvhM0K7dJkgMIw4LyksLBCJlPG86TpJ4zz/dR5xfJcpgdPncHWsbUpTFrebFPYhOVNCnUO9hsUqaQ8N09FUXvrA96wrEGkUVkFeGkhVu283mOwO5BPEjqfUHehqUNhNltNbesQV0LKHwuBe674oPiQcDRtDNomllwMhULMUd1UJvUwaI+vgL5QZlT18fjCj7X9S9yDESNsuDsKkCbzDy8m9XEcTewK46nbtrT7cUO3d9/o/uctfd9d0939jq6/fkaBaml0vj9qnKI+z+Wu4c5gN9qc7xX+A4GqjmPY+vAUAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"error\"\n        title=\"error\"\n        src=\"/static/7b63ae617fc03403f8c08481c97a65b6/f058b/error_01.png\"\n        srcset=\"/static/7b63ae617fc03403f8c08481c97a65b6/c26ae/error_01.png 158w,\n/static/7b63ae617fc03403f8c08481c97a65b6/6bdcf/error_01.png 315w,\n/static/7b63ae617fc03403f8c08481c97a65b6/f058b/error_01.png 630w,\n/static/7b63ae617fc03403f8c08481c97a65b6/31aff/error_01.png 823w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>対処法</h3>\n<p><code class=\"language-text\">package-lock.json</code>と<code class=\"language-text\">node_modeles</code>の中身を全部消して、<code class=\"language-text\">npm install</code>する。</p>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\"><span class=\"token function\">PS</span> C:¥Users¥hoge> <span class=\"token function\">rm</span> node_modules\n<span class=\"token function\">PS</span> C:¥Users¥hoge> <span class=\"token function\">rm</span> package<span class=\"token operator\">-</span>lock<span class=\"token punctuation\">.</span>json\n<span class=\"token function\">PS</span> C:¥Users¥hoge> npm install</code></pre></div>","fields":{"slug":"/gatsby-environment-settings/"},"frontmatter":{"title":"gatsby環境設定","created":"2021-1-31 Sun","updated":"2021-2-10 Wed","description":"WindowsでNodeとGatsbyを導入し、Github Pagesで公開するまでの備忘録です","tag":["gatsby","windows","node"],"author":["nozzle"],"index":"1"}},"previous":{"fields":{"slug":"/git-memorandum/"},"frontmatter":{"title":"git備忘録"}},"next":{"fields":{"slug":"/narazuke-new-feature-candidates/"},"frontmatter":{"title":"NARADUKE新機能候補"}}},"pageContext":{"index":1,"id":"006a63f6-2c35-54f2-83ee-35eb140c9e73","previousPostId":"60dbe975-3a66-5df1-964d-d4f2a149117e","nextPostId":"39c5d020-bdd8-565f-99f3-147f849626f5"}},"staticQueryHashes":["3284037645","500847697"]}