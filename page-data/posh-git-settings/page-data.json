{"componentChunkName":"component---src-templates-blog-post-js","path":"/posh-git-settings/","result":{"data":{"site":{"siteMetadata":{"title":"NARAZUKE","author":[{"name":"nozzle","summary":"who lives in gummaken.","social":{"github":"nozzlex3"}},{"name":"konnyaku","summary":"who is known as Siege Sukosuko Samurai.","social":{"github":"wabetarou"}}]}},"markdownRemark":{"id":"08bb56a4-5941-547c-9ab9-9f9ad130bbe3","excerpt":"経緯 「気づいたら develop ブランチで作業してたわ、すまん」 「俺もだったわ」 posh-git とは posh-git is a PowerShell module that integrates Git and PowerShell by providing Git status summary…","html":"<h2>経緯</h2>\n<p>「気づいたら develop ブランチで作業してたわ、すまん」<br>\n「俺もだったわ」</p>\n<h2>posh-git とは</h2>\n<blockquote>\n<p>posh-git is a PowerShell module that integrates Git and PowerShell by providing Git status summary information that can be displayed in the PowerShell prompt</p>\n</blockquote>\n<p>引用元:<a href=\"https://github.com/dahlbyk/posh-git\">https://github.com/dahlbyk/posh-git</a></p>\n<p>posh-git とは、PowerShell に git のステータスを出せるモジュールである。ブランチ名が表示されるので、ヒューマンエラーの削減に期待できる。ブランチ名やアンステージドなファイルを tab キー補完してくれる機能も搭載。git ユーザ垂涎のモジュールだ。<br>\n私の実行環境は PowerShell 7.1.1。 posh-git は 6.x とあったが問題なく導入できた。</p>\n<h2>PowerShell のプロファイルの場所</h2>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\"><span class=\"token function\">echo</span> <span class=\"token variable\">$profile</span></code></pre></div>\n<p><code class=\"language-text\">D:\\Documents\\PowerShell\\Microsoft\\PowerShell_profile.ps1</code>だった。君はどうだ？</p>\n<h2>Git のパス確認</h2>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\">gcm git</code></pre></div>\n<h2>posh-git を導入</h2>\n<p>README に従って、<code class=\"language-text\">~/git</code>の中に入れることにしました。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> <span class=\"token function\">git</span>\n<span class=\"token builtin class-name\">cd</span> ~/git\n<span class=\"token function\">git</span> clone git@github.com:dahlbyk/posh-git.git   <span class=\"token comment\"># posh-gitをgit clone</span></code></pre></div>\n<h2>プロファイルに追記する</h2>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\">code <span class=\"token variable\">$profile</span>       <span class=\"token comment\"># VScodeでMicrosoft.PowerShell.ps1を編集する</span></code></pre></div>\n<p>vim でも emac でも nano でも良いよ。\nエディタで以下の内容を追記する。</p>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\"><span class=\"token function\">Import-Module</span> <span class=\"token string\">'~/git/posh-git/src/posh-git.psd1'</span>        <span class=\"token comment\"># posh-gitを読み込ませる</span>\n<span class=\"token variable\">$GitPromptSettings</span><span class=\"token punctuation\">.</span>DefaultPromptBeforeSuffix<span class=\"token punctuation\">.</span>Text = <span class=\"token string\">'`n'</span>    <span class=\"token comment\"># ブランチ名の後、改行する</span></code></pre></div>\n<h2>プロファイルを読み込む</h2>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\"><span class=\"token punctuation\">.</span> <span class=\"token variable\">$profile</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 579px; overflow: visible\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f0cb31b736ed5bbdcb59b56a7c586e05/c08bc/powershell_screenshot_01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 8.227848101265824%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAbUlEQVQI11XKWw6DIBRFUccCER9XQfuAioBx/oPakqZp2o+V7JycppyJnF/ksnEckZTDu0uVUmBP/iMQo6/fwOO5EnaDPxXLpliD5ta33LuWRiaDtQOz7b/cMmLd//ZLxCCzRpximCpRjH3VaS5FoD6w1C0xTAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"powershell_screenshot_01\"\n        title=\"powershell_screenshot_01\"\n        src=\"/static/f0cb31b736ed5bbdcb59b56a7c586e05/c08bc/powershell_screenshot_01.png\"\n        srcset=\"/static/f0cb31b736ed5bbdcb59b56a7c586e05/c26ae/powershell_screenshot_01.png 158w,\n/static/f0cb31b736ed5bbdcb59b56a7c586e05/6bdcf/powershell_screenshot_01.png 315w,\n/static/f0cb31b736ed5bbdcb59b56a7c586e05/c08bc/powershell_screenshot_01.png 579w\"\n        sizes=\"(max-width: 579px) 100vw, 579px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br>\n表示がこうなってたら成功</p>\n<h2>表示の意味</h2>\n<h3>ローカル</h3>\n<p>解説を見るより、手を動かして仕様を確認したほうが断然理解が早い。<br>\n空っぽのディレクトリに<code class=\"language-text\">git init</code>して適当なファイルを 3 つ作ると、以下のような表示が出る。\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; overflow: visible\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cb503189d3f17d94d19e0409a4258e0c/1cfc2/git_status_display_01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.54430379746836%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABiklEQVQoz21R207bQBT0h5QkhN2wudhAEuK92XFqNYqdXUVKy0sb+pCXfhCqeAYhviCWUH8sqF5xeuzwUBAPoxmdMxodzfGyLHs0xt5Za+8/Au7u7Tu8mb36MOdhsViMvPl8DkoJEIKDVBw1sjzoiqtdrWuIV89/jB4hBVQ5WZb/9qJIwQn5tB8ErZJ0WuUJaZSUtWtNT4/LNm2Up6RZUtosCe4YbdWzignOuwzRP9prrcAYc+MpFP1eo0yzsxe9/QXy+wbCb1cgf/wEPxIw7FCwvTGMGYNF7wIydg79LoGr7gSCDoHYpy9R0v6rlAJrMVAfLnz2z5puMApcOFWO69D543N3TI4c67RcOtWOsbabaeEuh4Eb9KlLY+VG6E8T7vyg+ay0xEB7gx1+wf5CCPkEBL8EKSZ1j7WWIUSxhukshgShY1l3J3AuNYckieFzOgPOQ6hysMNbD7/zB7+2w/TCVDAVTM2r1arYbK6La8R2uy3W66/FMl8ePEtT5KjzPC/w2zvMecIvq38uIt5U5CIohAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"git_status_display_01.png\"\n        title=\"git_status_display_01.png\"\n        src=\"/static/cb503189d3f17d94d19e0409a4258e0c/f058b/git_status_display_01.png\"\n        srcset=\"/static/cb503189d3f17d94d19e0409a4258e0c/c26ae/git_status_display_01.png 158w,\n/static/cb503189d3f17d94d19e0409a4258e0c/6bdcf/git_status_display_01.png 315w,\n/static/cb503189d3f17d94d19e0409a4258e0c/f058b/git_status_display_01.png 630w,\n/static/cb503189d3f17d94d19e0409a4258e0c/1cfc2/git_status_display_01.png 900w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>作成したファイルのうち、一つを<code class=\"language-text\">git add</code>してやると、以下のような表示になる。\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; overflow: visible\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/54c1cdc8b82716fab0f50f94d065c770/1cfc2/git_status_display_02.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.54430379746836%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABcklEQVQoz3WR3UrDQBCF8xyCrTbZNP1J0zZNsps1SWk1NDWRioI3FX0nEa8V8QksiC9mcZeOs9sqInjxcWZmh7PDjFEUxUtVVY/I0w/ljr/5f2AP+jzPZjPfyPMc4pgC5wiqimPONIyhMvaTb6HAEMqpjrcwUD5FMb830pQDceofpn0gFFbzUFh2TdP1a6Lt1YVJ9gXBnBCsWzXhWQ0RWkQ4Vl0QxLb3P5TP6Wl5Z0zGEWSLTNDLqw2/uAAff+oHJgxjG3juQJASCDMHRsyEyGtC1vYg7biQdwaQdF3gTXeTRNbn9JjjhGiYJDGQZn09CPoyiIbSaVvS67dkEHoyokPp9hytTqshW21TUurLoe/ie1/6o54cDLrysLG3VhOWJRqe5CdAWQhRNNJQGgKLI43aZ5odQZYlMJmOt/vbvWmY6tmq8pnP5w8GXue9LKvXqjpbKTDW4D5Wi8VitVxeI8vVzc0t5ue6/t3zi1f0ecMr8y+X/913HjNshgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"git_status_display_02.png\"\n        title=\"git_status_display_02.png\"\n        src=\"/static/54c1cdc8b82716fab0f50f94d065c770/f058b/git_status_display_02.png\"\n        srcset=\"/static/54c1cdc8b82716fab0f50f94d065c770/c26ae/git_status_display_02.png 158w,\n/static/54c1cdc8b82716fab0f50f94d065c770/6bdcf/git_status_display_02.png 315w,\n/static/54c1cdc8b82716fab0f50f94d065c770/f058b/git_status_display_02.png 630w,\n/static/54c1cdc8b82716fab0f50f94d065c770/1cfc2/git_status_display_02.png 900w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>残り 2 つも<code class=\"language-text\">git init</code>すると、以下のような表示に変わる。\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; overflow: visible\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/afd53f6fc94af3909f84e878f13e158e/1cfc2/git_status_display_03.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.54430379746836%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABgUlEQVQoz22S3U7CQBCF+yBSfkopUFok/LTdLaUFRVq3IQG9MeAFNz4QMV5rjE9AE+OLQeyGcbZVo9GLyflmpz3ZnqkUhuELY/FjHMdP/xXOcmZ/z9iPM/R5ns1mXWk6nQKlDjiODYTayKgkZ6FiRggW6hf/UvEusvAJw+heGg4pKNWTfcsspdVaKVWqcqrWKxmrWvmzl7HHUuW01iimiiI07zWtkDb1wt51KTDGthJF0JtyOgnbR3dzB+RmBdbVNZDVLZiUgNEpgxdrYPYUoBc1IDMVmq0qjJcq6D0dOrR39LzSO6EU4hgN3fyGB6Nd5K2uya0R5bZrcaPX5mWlwLV6iQdnhNcbFe4FFu/2Da4bKvcnDvIpzlxumPJBXAyz3GKG55ifBZY9AMfuA3EGWY4ZEws8zwXf9yAIRiA+i2T52VmGvj+E8dgH27ZA+GCGDxJu5w23tUP3hIliolim8/k8Wa3WyXq9TjabTbJYLJMouvx+RnAURQn+ATv0ecUt0w9/S96iATRk0gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"git_status_display_03.png\"\n        title=\"git_status_display_03.png\"\n        src=\"/static/afd53f6fc94af3909f84e878f13e158e/f058b/git_status_display_03.png\"\n        srcset=\"/static/afd53f6fc94af3909f84e878f13e158e/c26ae/git_status_display_03.png 158w,\n/static/afd53f6fc94af3909f84e878f13e158e/6bdcf/git_status_display_03.png 315w,\n/static/afd53f6fc94af3909f84e878f13e158e/f058b/git_status_display_03.png 630w,\n/static/afd53f6fc94af3909f84e878f13e158e/1cfc2/git_status_display_03.png 900w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>リモート</h3>\n<p>github でリポジトリを作る。</p>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\">git remote add origin git@github<span class=\"token punctuation\">.</span>com:nozzlex3<span class=\"token operator\">/</span>posh<span class=\"token operator\">-</span>git_test<span class=\"token punctuation\">.</span>git     <span class=\"token comment\"># リモートリポジトリを指定し、originと名付ける</span>\ngit push <span class=\"token operator\">-</span>u origin master   <span class=\"token comment\"># プッシュ先をoriginのmasterブランチ</span></code></pre></div>\n<p>表示がこうなる。<br>\n≡ はローカルブランチとリモートブランチが同一であることを表している。\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; overflow: visible\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2602f6201fa4386be3c947c3974cbb50/1cfc2/git_status_display_04.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.54430379746836%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABV0lEQVQoz22R20rDQBCG8yC1qd0kPWhRjGmT3W1TeghNSGhzJUKqWH0jEa8V8QkaEF9MMYvjbE70wouPmWX+/99lR/F9/z0Mo5cojF7Dkij6n8NZrS0r5rytVitT8TwPGHMQu6wOONQGSoszLfviXPVOra18Msf3gydlPGbQJo0vTW9mEqI1s9OBmnV6rYyQo0zvHGea0cor0dSsf6Jmvb6a6yqP9MucMAwf80ADxd0e+UWwb8NsYQC7vgJ+9wDDOAaa3ILpLeDcD2G24WCZKugGAamXPvT/1IG8eOE33iQkeLMYnKmiO9CFyR1hUUtc0qEgRkvQCRPcvRCdbkO0tUIvkf46cOkt8c9G4DijoiK2jYwsoLYFrsvBnTCYumOYz6fAOcP5sNZWPg9z8A+fFdzOJ25pj6QVuMW8rtebNEmSdLu9SXe7+zSO4zQIgnp+wB5zPnDL7A8/z9w1Q/NPOwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"git_status_display_04.png -reverse\"\n        title=\"git_status_display_04.png -reverse\"\n        src=\"/static/2602f6201fa4386be3c947c3974cbb50/f058b/git_status_display_04.png\"\n        srcset=\"/static/2602f6201fa4386be3c947c3974cbb50/c26ae/git_status_display_04.png 158w,\n/static/2602f6201fa4386be3c947c3974cbb50/6bdcf/git_status_display_04.png 315w,\n/static/2602f6201fa4386be3c947c3974cbb50/f058b/git_status_display_04.png 630w,\n/static/2602f6201fa4386be3c947c3974cbb50/1cfc2/git_status_display_04.png 900w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>ローカルブランチで新しくコミットがあると、↑+数字で何コミット進んでいるかが表示される。\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; overflow: visible\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/407bb289c282e8a9a27e47c12d995c9e/1cfc2/git_status_display_05.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.54430379746836%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABRklEQVQoz4WRzU7CQBSF+yCkRPoDSGEhAp2phVqloWaa2oU72PBKxrjWGJ+ASYwvprETr2f6Q3Tl4su903vOmWaukabpqxDZUyayZ9GQZf9z1DYVOS+bzWZqJElCQcCA31RGjPvEed3ryoMGXqPnrbb16Zw0vXkwwjCgntX5sB2z1Fi2WXrjbtkfoLfM0unju4vq1v3g1CxHXrfStR7t1zlCiPsq0O2flIOh9Q3QW3R17VB061B851KQoi9cmsc2TUOb+BrnyK50Wq998H8dAy/qP/zETUqDm9V40lVDz1QzPlJzNlEzNlaW21ELdqZWl+fVvGfXeo32HwPXyRpvsiDGFnUFvq+ZE2c+rVZhRRQtKY4j9Evyf2lbX4IcvOGjge28Y0sHIFuwRVQh8zyX2+1W7nY7ud/vZVEUEqZm/ocDct6w5eAHv63a2whz2ZYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"git_status_display_05.png\"\n        title=\"git_status_display_05.png\"\n        src=\"/static/407bb289c282e8a9a27e47c12d995c9e/f058b/git_status_display_05.png\"\n        srcset=\"/static/407bb289c282e8a9a27e47c12d995c9e/c26ae/git_status_display_05.png 158w,\n/static/407bb289c282e8a9a27e47c12d995c9e/6bdcf/git_status_display_05.png 315w,\n/static/407bb289c282e8a9a27e47c12d995c9e/f058b/git_status_display_05.png 630w,\n/static/407bb289c282e8a9a27e47c12d995c9e/1cfc2/git_status_display_05.png 900w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>トラブルシュート:追加したファイル数と posh-git の表示数が合わない、足りない</h2>\n<h3>対処法</h3>\n<p>正しい表示なので問題ない。</p>\n<h3>解説</h3>\n<p><code class=\"language-text\">posh-git</code>の表示はおそらく、<code class=\"language-text\">git status</code>の結果を表示している。そのため、複数ファイルを追加していてもそれらが同一のディレクトリに追加されている場合、<code class=\"language-text\">git add</code>するのはそのディレクトリ 1 つで済む。まずは<code class=\"language-text\">git status</code>の出力と表示数を見比べてみよう。</p>","fields":{"slug":"/posh-git-settings/"},"frontmatter":{"title":"gitのブランチ名をPowerShellで表示する","created":"2021-2-5 Fri","updated":"2021-2-10 Wed","description":"posh-gitを使ってPowerShellでブランチ名を表示する操作の備忘録","tag":["git","github","powershell","windows"],"author":["nozzle"],"index":"11"}},"previous":{"fields":{"slug":"/blog_service_impression/"},"frontmatter":{"title":"ブログサービス所感"}},"next":{"fields":{"slug":"/trouble-shooting-EPERM-npm-install/"},"frontmatter":{"title":"トラブルシュート：npm installすると、\"Error EPERM operation not permitted, unlink ...\"が出る"}}},"pageContext":{"index":11,"id":"08bb56a4-5941-547c-9ab9-9f9ad130bbe3","previousPostId":"da720961-74f7-536c-b704-956a29accba2","nextPostId":"03645724-076a-590e-a6d8-e0834e805f57"}},"staticQueryHashes":["3284037645","500847697"]}